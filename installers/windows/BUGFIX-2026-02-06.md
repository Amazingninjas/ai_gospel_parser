# Installer Bug Fixes - 2026-02-06

## Issues Found During Testing

### Issue #1: Docker build failed with "path not found"

**Error Message:**
```
unable to prepare context: path "C:\\Program Files\\AI Gospel Parser\\backend" not found
```

**Root Cause:**
- The Inno Setup installer places files in `C:\Program Files\AI Gospel Parser\`
- The post-install script clones the repository to `%USERPROFILE%\Documents\ai_gospel_parser\`
- The launcher scripts (`launch.bat` and `stop.bat`) were running `docker-compose` from the Program Files directory instead of the Documents directory
- Docker couldn't find the `backend` and `frontend` directories because they were in a different location

**Fix:**
Modified both `launch.bat` and `stop.bat` to:
1. Set `APP_DIR=%USERPROFILE%\Documents\ai_gospel_parser`
2. Check if the directory exists (show error if not)
3. Change to that directory before running docker-compose commands

**Files Changed:**
- `installers/windows/launch.bat`
- `installers/windows/stop.bat`

### Issue #2: Docker Compose version warning

**Warning Message:**
```
time="2026-02-06T11:48:48-05:00" level=warning msg="docker-compose.yml: the attribute `version` is obsolete"
```

**Root Cause:**
Docker Compose v2 no longer requires the `version: '3.8'` field. It's deprecated and should be removed.

**Fix:**
Removed the `version: '3.8'` line from `docker-compose.yml`

**Files Changed:**
- `docker-compose.yml`

## How to Rebuild the Installer

### Prerequisites
- Windows system with Inno Setup 6 installed
- Download from: https://jrsoftware.org/isinfo.php

### Build Steps

1. **Open Command Prompt** in the Windows installers directory:
   ```
   cd "C:\Users\Justin\Desktop\AI Projects\ai_gospel_parser\installers\windows"
   ```

2. **Run the build script:**
   ```
   build-exe.bat
   ```

3. **Find the new installer:**
   - Location: `installers\windows\output\AI-Gospel-Parser-Setup-1.0.1.exe`
   - Size: ~10-15 MB

### Alternative: GitHub Actions

The project has a GitHub Actions workflow that can build the installer automatically:

1. Go to: https://github.com/Amazingninjas/ai_gospel_parser/actions
2. Click "Build Windows Installer"
3. Click "Run workflow"
4. Download the artifact once complete

## Testing the Fixed Installer

### Test Checklist

1. **Fresh Installation:**
   - [ ] Download new .exe installer
   - [ ] Run installer as Administrator
   - [ ] Verify Docker Desktop is running
   - [ ] Allow post-install script to clone repository
   - [ ] Verify repository clones to `C:\Users\{username}\Documents\ai_gospel_parser`

2. **Launch Application:**
   - [ ] Click "AI Gospel Parser" from Start Menu
   - [ ] Verify it changes to correct directory
   - [ ] Verify Docker containers start successfully
   - [ ] Verify browser opens to http://localhost:3000
   - [ ] Verify application loads correctly

3. **Stop Application:**
   - [ ] Click "Stop AI Gospel Parser" from Start Menu
   - [ ] Verify containers stop successfully
   - [ ] No errors displayed

4. **Restart Application:**
   - [ ] Click "AI Gospel Parser" from Start Menu again
   - [ ] Verify it detects already-running containers
   - [ ] Verify browser opens successfully

### Expected Behavior

**Before Fix:**
```
[ERROR] Failed to start application
unable to prepare context: path "C:\\Program Files\\AI Gospel Parser\\backend" not found
```

**After Fix:**
```
[1/3] Checking Docker status...
[OK] Docker is running
[2/3] Checking application status...
Starting application...
[OK] Application started
[3/3] Opening browser...
```

## Next Steps

1. **Rebuild the .exe installer** using build-exe.bat (Windows required)
2. **Test the new installer** on a clean Windows system
3. **Update GitHub release** with new v1.0.2 installer (if all tests pass)
4. **Update README.md** to document the fix in changelog
5. **Notify users** who may have experienced the issue

## Notes for Next Release

- Consider bundling all files directly in Program Files instead of cloning from GitHub
  - Pros: Simpler, no Git dependency, works offline
  - Cons: Larger installer size, harder to update

- Alternatively: Keep current approach but improve error messages
  - Add troubleshooting guide to installer
  - Show clearer instructions if repository clone fails
  - Provide manual clone instructions as fallback

## Files Modified Summary

```
ai_gospel_parser/
├── installers/windows/
│   ├── launch.bat          (FIXED - changed to correct directory)
│   ├── stop.bat            (FIXED - changed to correct directory)
│   └── BUGFIX-2026-02-06.md (NEW - this file)
└── docker-compose.yml      (FIXED - removed deprecated version field)
```

## Commit Message Suggestion

```
Fix Windows installer launcher scripts to use correct directory

The launcher scripts were trying to run docker-compose from the Program Files
installation directory, but the repository is actually cloned to the user's
Documents folder by the post-install script.

Changes:
- Update launch.bat to change to %USERPROFILE%\Documents\ai_gospel_parser
- Update stop.bat to change to %USERPROFILE%\Documents\ai_gospel_parser
- Add directory existence checks with helpful error messages
- Remove deprecated 'version' field from docker-compose.yml

Fixes the "path not found" error that prevented the application from starting
after installation.

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>
```
